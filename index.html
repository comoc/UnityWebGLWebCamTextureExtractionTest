<!doctype html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Unity WebGL Player | New Unity Project 1</title>
		<style>
/* a style sheet needs to be present for cursor hiding and custom cursors to work. */
/*
   #hidden_canvas {
	   visibility: hidden;
   }
 */
		</style>
		<script>
var gameObjectName;
var methodNameSuccess;
var methodNameError;

function post(name, success, error, base64) {
	var canvas = document.getElementById('hidden_canvas');
	var ctx = canvas.getContext('2d');
	var image = new Image();
	image.onload = function() {
		ctx.drawImage(image, 0, 0);
		var imagedata = ctx.getImageData(0, 0, image.width, image.height);
		console.log('width: ' + imagedata.width + ' height: ' + imagedata.height);
	};
	image.src = base64;

	gameObjectName = name;
	methodNameSuccess = success;
	methodNameError = error;
		
		// var xhr = new XMLHttpRequest();
		// xhr.open('POST', url, true);
		// xhr.setRequestHeader('Content-Type', 'application/json');
			// xhr.onreadystatechange = function () {
				// 	if (xhr.readyState == 4) {
					// 		if (xhr.status == 200) {
						// 			if (gameObjectName && methodNameSuccess)
						// 				SendMessage(gameObjectName, methodNameSuccess, xhr.responseText);
						// 		} else {
						// 			if (gameObjectName && methodNameError)
						// 				SendMessage(gameObjectName, methodNameError, xhr.responseText);
						// 		}
					// 	} else {
					// 		console.log("xhr.status: " + xhr.status);
					// 	}
				// };
			//
			// var params = {
				// 	requests: [
					// 		{
						// 			image: {
							// 				content: base64
							// 			},
						// 			features: [
							// 				{
								// 					type: apiType,
								// 					maxResults: maxResults
								// 				}
							// 			]
						// 		}
					// 	]
				// };
			//
			// xhr.send(JSON.stringify(params));
		}
		</script>
	</head>
	<body>
		<canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()" height="600px" width="960px"></canvas>
		<script type='text/javascript'>
  var Module = {
    TOTAL_MEMORY: 268435456,
    errorhandler: null,			// arguments: err, url, line. This function must return 'true' if the error is handled, otherwise 'false'
    compatibilitycheck: null,
    backgroundColor: "#222C36",
    splashStyle: "Light",
    dataUrl: "Release/build.data",
    codeUrl: "Release/build.js",
    asmUrl: "Release/build.asm.js",
    memUrl: "Release/build.mem",
  };
</script>
<script src="Release/UnityLoader.js"></script>

		<canvas id="hidden_canvas" oncontextmenu="event.preventDefault()" height="600px" width="960px"></canvas>
	</body>
</html>
